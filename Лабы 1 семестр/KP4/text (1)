#include <stdio.h>
#include <stdlib.h>


#include <math.h>


long double module (long double x) {
  if (x>0.0) {
    return x;
  }
  else {return -x;}
}

long double method_dihotomii (long double a, long double b, long double e, int *k, long double F1(long double)) {
  long double g;
  while (module(a-b)>e) {
   if (F1(a)*F1((a+b)/2)>0.0) {      
    a=(a+b)/2.0; (*k)++;} 
   else {
    if (F1(b)*F1((a+b)/2)>0.0) {
      b=(a+b)/2; (*k)++;} 
   }}
  return (a+b)/2;
}

long double method_iteration (long double a, long double b, long double e, int *k, long double F12(long double)) {
  long double x_K=0.0,x_k=0.0; 
  x_k=a; x_K=F12(x_k);
  while (module(F12(x_K)-x_K)>e && (*k)<100) {
   x_K=F12(x_K); (*k)++; 
  }
  return x_K;
}

long double method_nyutona (long double a, long double b, long double e, int *k, long double F1(long double), long double F13(long double)) {
  long double x_K=0.0,x_k=0.0; 
  x_k=(a+b)/2.0; x_K=x_k - F1(x_k)/F13(x_k);
  while (module(F1(x_K)/F13(x_K))>=1000.0*e) {
    x_K=x_K - F1(x_K)/F13(x_K); (*k)++; 
  }
  return x_K;
}

long double F1 (long double x) {
  return pow(3.0, x)*0.6-2.3*x-3.0;
}

long double F12 (long double x) {
  return log((2.3*x+3.0)/0.6)/log(3.0);
}

long double F13 (long double x) {
  return 0.6*pow(3.0, x)*log(3.0)-2.3;
}

long double F2 (long double x) {
  return x*x-log(x+1.0)-3.0;
  //return x+pow(x,1.0/3.0)+pow(x,1.0/2.0)-2.5;
}

long double F22 (long double x) {
  return pow(3+log(1+x),0.5);
  //return -pow(x,1.0/3.0)-pow(x,1.0/2.0)+2.5;
}

long double F23 (long double x) {
  return 2*x-1/1+x;
  //return 1.0+1.0/(2.0*pow(x,1.0/2.0))+1.0/(3.0*pow(x,2.0/3.0));
}

int main() {
  long double e,a=2.0,b=3.0,x_K=0.0,x_k=0.0; int k=0,E;
  e=1.0;
  while (1.0+e/2.0>1.0) {
    e=e/2.0;}
   printf("Машинное эпсилон=%.30Lf\n",e);
   printf("\n");
   printf("Введите колличество знаков после запятой: ");
   scanf("%d", &E);
   e=e*pow(10.0,20.0-E);

   printf("I Первое уравнение\n ");
   printf("1. Метод дихотомии\n     ");
   printf("x=%.*Lf Колличество итераций: %d F(x)=%Lf\n ", E,method_dihotomii(a,b,e,&k,F1),k,F1(method_dihotomii(a,b,e,&k,F1)));

   k=0;

   printf("2. Метод итераций\n     ");
   printf("x=%.*Lf Колличество итераций: %d F(x)=%Lf\n ", E,method_iteration(a,b,e,&k,F12),k,F1(method_iteration(a,b,e,&k,F12)));

   k=0;

   printf("3. Метод Ньютона\n     ");
   printf("x=%.*Lf Колличество итераций: %d F(x)=%Lf\n", E,method_nyutona(a,b,e,&k,F1,F13),k,F1(method_nyutona(a,b,e,&k,F1,F13)));
     
   k=0; a=2.0; b=3.0;

   printf("II Второе уравнение\n ");
   printf("1. Метод дихотомии\n     ");
   printf("x=%.*Lf Колличество итераций: %d F(x)=%Lf\n ", E,method_dihotomii(a,b,e,&k,F2),k,F2(method_dihotomii(a,b,e,&k,F2)));
  
   k=0;
 
   printf("2. Метод итераций\n     ");
   printf("x=%.*Lf Колличество итераций: %d F(x)=%Lf\n ", E,method_iteration(a,b,e,&k,F22),k,F2(method_iteration(a,b,e,&k,F22)));

   k=0;
 
   printf("3. Метод Ньютона\n     ");
   printf("x=%.*Lf Колличество итераций: %d F(x)=%Lf\n", E,method_nyutona(a,b,e,&k,F2,F23),k,F2(method_nyutona(a,b,e,&k,F2,F23)));
     return 0;
}



igor@igor-Aspire-A315-53G:~/Рабочий стол$ ./a.out
Машинное эпсилон=0.000000000000000000108420217249

Введите колличество знаков после запятой: 4
I Первое уравнение
 1. Метод дихотомии
     x=2.4204 Колличество итераций: 10 F(x)=0.003048
 2. Метод итераций
     x=2.4196 Колличество итераций: 4 F(x)=-0.002817
 3. Метод Ньютона
     x=2.4244 Колличество итераций: 0 F(x)=0.031398
II Второе уравнение
 1. Метод дихотомии
     x=2.0269 Колличество итераций: 10 F(x)=0.000619
 2. Метод итераций
     x=2.0265 Колличество итераций: 1 F(x)=-0.000664
 3. Метод Ньютона
     x=2.1927 Колличество итераций: 0 F(x)=0.647200
igor@igor-Aspire-A315-53G:~/Рабочий стол$ ./a.out
Машинное эпсилон=0.000000000000000000108420217249

Введите колличество знаков после запятой: 7
I Первое уравнение
 1. Метод дихотомии
     x=2.4199815 Колличество итераций: 20 F(x)=-0.000001
 2. Метод итераций
     x=2.4199802 Колличество итераций: 8 F(x)=-0.000010
 3. Метод Ньютона
     x=2.4199957 Колличество итераций: 1 F(x)=0.000100
II Второе уравнение
 1. Метод дихотомии
     x=2.0266891 Колличество итераций: 20 F(x)=-0.000001
 2. Метод итераций
     x=2.0266892 Колличество итераций: 4 F(x)=-0.000000
 3. Метод Ньютона
     x=2.0276966 Колличество итераций: 4 F(x)=0.003752
igor@igor-Aspire-A315-53G:~/Рабочий стол$ ./a.out
Машинное эпсилон=0.000000000000000000108420217249

Введите колличество знаков после запятой: 10
I Первое уравнение
 1. Метод дихотомии
     x=2.4199816459 Колличество итераций: 30 F(x)=-0.000000
 2. Метод итераций
     x=2.4199816450 Колличество итераций: 13 F(x)=-0.000000
 3. Метод Ньютона
     x=2.4199816464 Колличество итераций: 2 F(x)=0.000000
II Второе уравнение
 1. Метод дихотомии
     x=2.0266892635 Колличество итераций: 30 F(x)=0.000000
 2. Метод итераций
     x=2.0266892626 Колличество итераций: 6 F(x)=-0.000000
 3. Метод Ньютона
     x=2.0266906353 Колличество итераций: 9 F(x)=0.000005
igor@igor-Aspire-A315-53G:~/Рабочий стол$ ./a.out
Машинное эпсилон=0.000000000000000000108420217249

Введите колличество знаков после запятой: 15
I Первое уравнение
 1. Метод дихотомии
     x=2.419981646227694 Колличество итераций: 47 F(x)=-0.000000
 2. Метод итераций
     x=2.419981646227690 Колличество итераций: 22 F(x)=-0.000000
 3. Метод Ньютона
     x=2.419981646227694 Колличество итераций: 3 F(x)=-0.000000
II Второе уравнение
 1. Метод дихотомии
     x=2.026689263243522 Колличество итераций: 47 F(x)=-0.000000
 2. Метод итераций
     x=2.026689263243523 Колличество итераций: 11 F(x)=-0.000000
 3. Метод Ньютона
     x=2.026689263253031 Колличество итераций: 18 F(x)=0.000000
igor@igor-Aspire-A315-53G:~/Рабочий стол$ ./a.out
Машинное эпсилон=0.000000000000000000108420217249

Введите колличество знаков после запятой: 19
I Первое уравнение
 1. Метод дихотомии
     x=2.4199816462276937394 Колличество итераций: 60 F(x)=0.000000
 2. Метод итераций
     x=2.4199816462276935169 Колличество итераций: 25 F(x)=-0.000000
 3. Метод Ньютона
     x=2.4199816462276936252 Колличество итераций: 3 F(x)=-0.000000
II Второе уравнение
 1. Метод дихотомии
     x=2.0266892632435248608 Колличество итераций: 60 F(x)=-0.000000
 2. Метод итераций
     x=2.0266892632435249411 Колличество итераций: 13 F(x)=0.000000
 3. Метод Ньютона
     x=2.0266892632435257752 Колличество итераций: 25 F(x)=0.000000
igor@igor-Aspire-A315-53G:~/Рабочий стол$
